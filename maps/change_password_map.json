{
  "change_password_map": [
    {
      "actor": "createSessionActor",
      "handler": "getSession",
      "wrapper": {}
    },
    {
      "actor": "authenticationActor",
      "handler": "authenticateSession",
      "wrapper": {
        "getRequestUserUgent": {
          "type": "in",
          "source": "context",
          "rules": [
            {
              "name": "getHeaderFromRequest",
              "args": [
                "User-Agent"
              ]
            }
          ]
        },
        "getSessionUserAgent": {
          "type": "in",
          "source": "message.session.authInfo.userAgent"
        }
      }
    },
    {
      "actor": "asyncOpsActor",
      "handler": "getAsyncOperation",
      "wrapper": {
        "getToken": {
          "type": "in",
          "source": "message.token"
        },
        "setAsyncOperation": {
          "type": "out",
          "source": "message.async_operation"
        }
      }
    },
    {
      "actor": "changePasswordActor",
      "handler": "changePassword",
      "wrapper": {
        "getUserId": {
          "type": "in",
          "source": "message.async_operation.async_data"
        },
        "getPassword": {
          "type": "in",
          "target": "message.new_password"
        }
      }
    }
  ]
}